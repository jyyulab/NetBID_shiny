<!DOCTYPE html>

<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  

  <title>Tutorial - </title>
  <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css">
  
  <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

  <div class="page-wrap">
    <div class="side-bar">
      <a href="http://localhost:4000" class="site-title fs-6 lh-tight"></a>
      <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button" data-text-toggle="Hide">Menu</button></span>
      <div class="navigation main-nav js-main-nav">
        <nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list">
    
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/" class="navigation-list-link">NetBIDshiny</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item active">
            
            <a href="http://localhost:4000/docs/tutorial" class="navigation-list-link active">Tutorial</a>
            
          </li>
        
      
    
  </ul>
</nav>

      </div>
      <footer role="contentinfo" class="site-footer">
        <p class="text-small text-grey-dk-000 mb-0">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p>
      </footer>
    </div>
    <div class="main-content-wrap">
      <div class="page-header">
        <div class="main-content">
          
          <div class="search js-search">
            <div class="search-input-wrap">
              <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search " aria-label="Search " autocomplete="off">
              <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg>
            </div>
            <div class="js-search-results search-results-wrap"></div>
          </div>
          
          
        </div>
      </div>
      <div class="main-content js-main-content" tabindex="0">
        
          
        
        <div id="main-content" class="page-content" role="main">
          <h1 id="tutorial">Tutorial</h1>

<p>The purpose for NetBIDshiny:</p>

<p><strong>further analyze and visualize the results for drivers</strong>.</p>

<p>We choose the same demo dataset from GEO database: <a href="https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE116028">GSE116028</a>.</p>

<p>This dataset contains microarray data for 13 adult medulloblastoma (MB) samples. 
Three subgroups of adult MB were identified by distinct expression profiles, clinical features, pathological features, and prognosis, including 3 SHH, 4 WNT, and 6 Group4.
From them, Group4 tumors in adult had significantly worse progression-free and overall survival compared with tumors of the other molecular subtypes. 
Here, we want to <strong>find potential hidden drivers in Group4 compared with the other subtypes by using NetBID2</strong>, for which may be related with the specific clinical feature for Group4 MB.</p>

<hr />
<h2 id="quick-navigation-for-this-page">Quick Navigation for this page</h2>

<ul>
  <li>
    <p><a href="#before-start-introduction-to-the-servers-interface--pre-request">Before start: Introduction to the server’s interface &amp; pre-request</a></p>
  </li>
  <li>
    <p><a href="#upload-the-rdata-dataset">Upload the RData dataset</a></p>
  </li>
  <li>
    <p><a href="#plot-part">Plot part</a></p>

    <ul>
      <li>
        <p><a href="#volcano_plot-draw-the-volcano-plot-to-get-the-top-differentiated-expressionactivity-driver-list">VOLCANO_PLOT: Draw the Volcano plot to get the top differentiated expression/activity driver list</a></p>
      </li>
      <li>
        <p><a href="#netbid_plot-draw-the-netbid-plot-to-get-the-detailed-statistics-of-the-top-differentiated-expressionactivity-driver-list">NETBID_PLOT: Draw the NetBID plot to get the detailed statistics of the top differentiated expression/activity driver list</a></p>
      </li>
      <li>
        <p><a href="#gsea_plot-draw-the-gsea-plot-to-get-the-detailed-information-of-the-top-differentiated-activity-driver-list">GSEA_PLOT: Draw the GSEA plot to get the detailed information of the top differentiated activity driver list</a></p>
      </li>
      <li>
        <p><a href="#heatmap-draw-the-heatmap-to-get-the-expressionactivity-pattern-for-the-top-driver-list-vs-all-samples">HEATMAP: Draw the Heatmap to get the expression/activity pattern for the top driver list Vs. all samples</a></p>
      </li>
      <li>
        <p><a href="#function_enrich_plot-draw-the-function-enrichment-plot-to-get-the-function-annotation-for-the-top-driver-list">FUNCTION_ENRICH_PLOT: Draw the Function Enrichment plot to get the function annotation for the top driver list</a></p>
      </li>
      <li>
        <p><a href="#bubble_plot-draw-the-bubble-plot-to-get-the-function-annotation-for-the-top-driver-list-and-their-target-genes">BUBBLE_PLOT: Draw the Bubble plot to get the function annotation for the top driver list and their target genes</a></p>
      </li>
      <li>
        <p><a href="#target_net-draw-the-target-network-plot-to-draw-the-sub-network-structure-for-one-selected-driver">TARGET_NET: Draw the Target Network plot to draw the sub-network structure for one selected driver</a></p>
      </li>
      <li>
        <p><a href="#category_boxplot-draw-the-category-box-plot-to-get-the-expressionactivity-value-distribution-in-each-group-of-samples">CATEGORY_BOXPLOT: Draw the Category box plot to get the expression/activity value distribution in each group of samples</a></p>
      </li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="before-start-introduction-to-the-servers-interface--pre-request">Before start: Introduction to the server’s interface &amp; pre-request</h2>

<p>In the “Driver estimation” part of NetBID2 analysis, the final step is to generate a master table. If user strictly follow the suggested pipeline in NetBID2 analysis, and save an RData file by using <code class="highlighter-rouge">NetBID.saveRData(analysis.par=analysis.par,step='ms-tab')</code>, he will get an RData file under the <code class="highlighter-rouge">analysis.par$out.dir.DATA</code> directory with name as <code class="highlighter-rouge">analysis.par.Step.ms-tab.RData</code>. The RData file will contains one complicated list object <code class="highlighter-rouge">analysis.par</code> with following components:</p>

<ul>
  <li><strong>main.dir</strong>, the main directory for the project, required for NetBIDshiny.</li>
  <li><strong>project.name</strong>, the project name, required for NetBIDshiny.</li>
  <li><strong>merge.network</strong>, a list with three components (target_list,igraph_obj,target_net) which contains detailed network structure for the NetBID analysis, required for NetBIDshiny.</li>
  <li><strong>cal.eset</strong>, a ExpressionSet class object for the expression value of the analysis dataset, required for NetBIDshiny.</li>
  <li><strong>merge.ac.eset</strong>, a ExpressionSet class object for the activity value of the analysis dataset, required for NetBIDshiny.</li>
  <li><strong>final_ms_tab</strong>, a data frame containing detailed results for all tested drivers, required for NetBIDshiny.</li>
  <li><strong>transfer_tab</strong>, a data frame for ID conversion, required but not necessary to run NetBIDshiny, if not included in the RData, it will automatically generate it in the first loading of the data.</li>
  <li>out.dir out.dir.QC out.dir.DATA out.dir.PLOT, the directory structure for the NetBID project, not required for NetBIDshiny.</li>
  <li>DE DA, detailed differentiated expression (DE)/activity (DA) statistics, not required for NetBIDshiny.</li>
</ul>

<p>Check the following diagram:</p>

<p><img src="f1.png" alt="f1" /></p>

<p>The interface is consisted of four parts:</p>

<ul>
  <li>
    <p>Topleft, mainly for manipulating the data sets; User could browser the dataset in the local file system, choose the species, analysis level, main id type for the selected dataset and upload the dataset. The demo dataset could be used for getting familiar with the app.</p>
  </li>
  <li>
    <p>Bottomleft, mainly for browsering the master table in this project. User could search and visualize the driver’s detailed information.</p>
  </li>
  <li>
    <p>Topright, mainly for selecting the plot type and the choice of parameters for each plot.</p>
  </li>
  <li>
    <p>Bottomright, mainly for the plot region, including the basic adjusting bar and one figure download button. User could choose to directly save the plot by right click on the plot and save it into the png format or use the download button, it will save the current figure into a pdf file.</p>
  </li>
</ul>

<p>The name for the plot tabs:</p>

<ul>
  <li><strong>VOLCANO_PLOT</strong>, the volcano plot to get the top differentiated expression/activity driver list, will call <code class="highlighter-rouge">draw.volcanoPlot()</code> in NetBID2.</li>
  <li><strong>NETBID_PLOT</strong>, the NETBID plot to get the statistics of top differentiated expression/activity driver list, will call <code class="highlighter-rouge">draw.NetBID()</code> in NetBID2.</li>
  <li><strong>GSEA_PLOT</strong>, the GSEA plot to get the detailed statistics of the top differentiated expression/activity driver list, will call <code class="highlighter-rouge">draw.GSEA.NetBID()</code> in NetBID2.</li>
  <li><strong>HEATMAP</strong>, the Heatmap to get the expression/activity pattern for the top driver list Vs. all samples, will call <code class="highlighter-rouge">draw.volcanoPlot()</code> in NetBID2.</li>
  <li><strong>FUNCTION_ENRICH_PLOT</strong>, the Function Enrichment plot to get the function annotation for the top driver list, will call <code class="highlighter-rouge">draw.funcEnrich.cluster()</code> in NetBID2.</li>
  <li><strong>BUBBLE_PLOT</strong>, the Bubble plot to get the function annotation for the top driver list and their target genes, will call <code class="highlighter-rouge">draw.bubblePlot()</code> in NetBID2.</li>
  <li><strong>TARGET_NET</strong> , the Target Network plot to draw the sub-network structure for one selected driver, will call <code class="highlighter-rouge">draw.targetNet()</code> and <code class="highlighter-rouge">draw.targetNet.TWO()</code> in NetBID2.</li>
  <li><strong>CATEGORY_PLOT</strong>, the Category box plot to get the expression/activity value distribution in each group of samples, will call <code class="highlighter-rouge">draw.categoryValue()</code> in NetBID2.</li>
</ul>

<h2 id="upload-the-rdata-dataset">Upload the RData dataset</h2>

<p>The first step is to upload the RData.</p>

<p>User could click the <strong>BROWSE</strong> button and select the RData file stored locally. 
After that, choose:</p>

<ul>
  <li>the species name in the select list (currently only 11 species is allowed due to the MSigDB annotation limitation).</li>
  <li>the gene/transcript level, this is the level for the driver main ID type.</li>
  <li>the main id type, user could select the matched main ID type for the driver (the list contains 10 most common ID type). If it is not included in the list, user could manually enter it in the textbox in the right. For the full list of allowed id type, user could follow the instruction of <a href="https://www.bioconductor.org/packages/devel/bioc/vignettes/biomaRt/inst/doc/biomaRt.html">biomaRt</a> or try the following locally:</li>
</ul>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ensembl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">useMart</span><span class="p">(</span><span class="s2">"ensembl"</span><span class="p">,</span><span class="w"> </span><span class="n">dataset</span><span class="o">=</span><span class="s2">"hsapiens_gene_ensembl"</span><span class="p">)</span><span class="w">
</span><span class="n">listAttributes</span><span class="p">(</span><span class="n">ensembl</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>Click the <strong>LOAD/RELOAD THE UPLOADED RDATA</strong> button and wait for data uploading. Here, for demo, user could directly click <strong>LOAD/RELOAD THE DEMO RDATA</strong>. 
Once finished, user will see the following interface (the browser bar will not be shown if choose the demo dataset):</p>

<p><img src="f2.png" alt="f2" /></p>

<p>The master table and the NOTE for the dataset will be displayed and the <strong>VOLCANO_PLOT</strong>,<strong>TARGET_NET</strong>, <strong>CATEGORY_PLOT</strong> tabs are active to use.</p>

<p>The NOTE message will display the project name, main directory, the species, analysis level, main id type, the number of TF (transcription factors) and SIG (signalling factors) and all comparisons in the master table. If some choice is wrong, user could modify the selection and reclick the <strong>LOAD/RELOAD THE UPLOADED RDATA</strong> button.</p>

<p><strong>NOTE</strong>: It will take about 3~4 seconds for uploading the demo dataset. 
If the original dataset is very large, for example the RData size is about 120 MB,  it will take about 10~15 seconds to upload the dataset if the original RData contains the ID transfer table. Otherwise, it will take longer for acquiring it from bioMart website (must with internet connection, about 10~20 seconds by testing).</p>

<h3 id="step-2-navigate-the-master-table-for-the-dataset">Step 2: Navigate the master table for the dataset</h3>

<p>The bottomleft of the interface displays the master table for the dataset. User could search the whole dataset by keywords and sort each column by clicking the column names. 
The first four columns are freezed as the <code class="highlighter-rouge">gene_label</code> is the human readable column for each driver, with <code class="highlighter-rouge">originalID_label</code> is the driver’s name in original ID type. <code class="highlighter-rouge">geneSymbol</code> is the column for gene names in symbol with <code class="highlighter-rouge">originalID</code> is the original gene ID.</p>

<h2 id="plot-part">Plot part</h2>

<h3 id="volcano_plot-draw-the-volcano-plot-to-get-the-top-differentiated-expressionactivity-driver-list">VOLCANO_PLOT: Draw the Volcano plot to get the top differentiated expression/activity driver list</h3>

<p>Volcano plot is the only one necessary plot user need to draw in NetBIDshiny app, if not, <strong>NETBID_PLOT</strong>, <strong>GSEA_PLOT</strong>, <strong>HEATMAP</strong>, <strong>FUNCTION_ENRICH_PLOT</strong>, <strong>BUBBLE_PLOT</strong> will not be active for use (The warning message will be: Please plot volcano plot first in order to choose the targeted comparison !). As in one NetBID project, multiple comparisons could be included for analysis. Those plots will use the top driver list for display that need user pre-defined comparison as the sorting criteria.</p>

<p>Here, we select <code class="highlighter-rouge">G4.Vs.others_DA</code> as the comparison want to focus in the following studies, better to choose the logFC column and P-value column correspondingly (if not, it will automatically change to the column related to the comparison) change the logFC threshold to 0.3 and P-value threshold to 1e-8, select the <code class="highlighter-rouge">Display significant items on plot?</code>, the interface will be:</p>

<p><img src="f3.png" alt="f3" /></p>

<p><strong>NOTE</strong>: user could choose to save the figure by right click and save or click the <strong>DOWNLOAD THE CURRENT PLOT</strong> button and the plot will saved into a pdf file (<strong>the following screen capture plots include the interface for the server and the downloaded pdf file</strong>):</p>

<p><img src="f4.png" alt="f4" /></p>

<p>In the bottom, the message indicates that 48 drivers passed by the filter. User could try to further modify the parameters to get the top driver list. Once decided, user could choose to click <strong>UPDATE THE MASTER TABLE BY USING THE PARAMETERS AND TOP NUMBER ABOVE</strong>, and the interfact will be:</p>

<p><img src="f5.png" alt="f5" /></p>

<p>Now, the note message will record the parameters used for filteration and the master table only contains 48 drivers passed the filter. User could click on the <strong>LOAD/RELOAD THE UPLOADED RDATA</strong> to recover into the original full dataset.</p>

<p><strong>NOTE</strong>: if user only want the Z-statistics as the criteria to get the top driver list, it is not necessary to update the master table. When user click the <strong>UPDATE THE MASTER TABLE BY USING THE PARAMETERS AND TOP NUMBER ABOVE</strong> button, he will need to re-do the valcano plot step to define the main comparison.</p>

<h3 id="netbid_plot-draw-the-netbid-plot-to-get-the-detailed-statistics-of-the-top-differentiated-expressionactivity-driver-list">NETBID_PLOT: Draw the NetBID plot to get the detailed statistics of the top differentiated expression/activity driver list</h3>

<p>Check multiple comparisons for DA and DE to display, and the final plot will be ordered by the focusing comparison (here G4.Vs. others_DA). The detailed display statistics could be chosen from “P.Value” and “logFC” for DE and DA independently. 
Save or download the plot:</p>

<p><img src="f6.png" alt="f6" /></p>

<h3 id="gsea_plot-draw-the-gsea-plot-to-get-the-detailed-information-of-the-top-differentiated-activity-driver-list">GSEA_PLOT: Draw the GSEA plot to get the detailed information of the top differentiated activity driver list</h3>

<p>GSEA plot is another way to display the top driver list. The option is the same to call <code class="highlighter-rouge">draw.NetBID.GSEA()</code> function in NetBID2. User could check the manual for detailed description. Try the following options:</p>

<p><img src="f7.png" alt="f7" /></p>

<p>Here, user could choose to only display the up or down-regulated drivers from the <code class="highlighter-rouge">choose the top strategy for selection</code>.</p>

<h3 id="heatmap-draw-the-heatmap-to-get-the-expressionactivity-pattern-for-the-top-driver-list-vs-all-samples">HEATMAP: Draw the Heatmap to get the expression/activity pattern for the top driver list Vs. all samples</h3>

<p>Heatmap is also for the top driver visualization, it is focused on expression/activity pattern across all samples with sample category shown:</p>

<p><img src="f8.png" alt="f8" /></p>

<h3 id="function_enrich_plot-draw-the-function-enrichment-plot-to-get-the-function-annotation-for-the-top-driver-list">FUNCTION_ENRICH_PLOT: Draw the Function Enrichment plot to get the function annotation for the top driver list</h3>

<p>This plot is the functional analysis for the top drivers based on MSigDB annotation. User could choose multiple categories of gene sets and related statistics for calculation. If the main category is selected, no matter what is the selection condition for the sub-category, all gene sets in the main category will be used. For example, if user choose the ‘C5:GO’ category, all ‘BP’, ‘MF’, ‘CC’ will be used.</p>

<p><img src="f9.png" alt="f9" /></p>

<h3 id="bubble_plot-draw-the-bubble-plot-to-get-the-function-annotation-for-the-top-driver-list-and-their-target-genes">BUBBLE_PLOT: Draw the Bubble plot to get the function annotation for the top driver list and their target genes</h3>

<p>This plot is the functional analysis for the target genes of the top drivers based on MSigDB annotation and will take some time in calculation (about several seconds). This plot will be very large size to visualize and strongly suggest user to download the figure:</p>

<p><img src="f10.png" alt="f10" /></p>

<h3 id="target_net-draw-the-target-network-plot-to-draw-the-sub-network-structure-for-one-selected-driver">TARGET_NET: Draw the Target Network plot to draw the sub-network structure for one selected driver</h3>

<p>This plot is to visualize the sub-network structure for the selected driver or two drivers. User could try different target cex, number of layer to find a better visualization options:</p>

<p><img src="f11.png" alt="f11" /></p>

<p>If the second driver is not the same as the first one, it will generate two driver interaction plot:</p>

<p><img src="f12.png" alt="f12" /></p>

<h3 id="category_boxplot-draw-the-category-box-plot-to-get-the-expressionactivity-value-distribution-in-each-group-of-samples">CATEGORY_BOXPLOT: Draw the Category box plot to get the expression/activity value distribution in each group of samples</h3>

<p>This plot is the box plot of activity/expression value across different category of samples, user could choose multiple categories at the same time:</p>

<p><img src="f13.png" alt="f13" /></p>

<hr />



          
        </div>
      </div>
    </div>
  </div>

</body>
</html>
